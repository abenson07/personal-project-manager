# Task / Project Manager — Revised Master PRD

## Overview

This is a personal project management app designed to support an **idea → plan → build** workflow that integrates tightly with Cursor + Taskmaster.

The core philosophy:
- Thinking happens **inside the app**
- Building happens **inside Cursor**
- Markdown is the contract between the two

Projects contain **subprojects**.  
Subprojects move from **planned mode** (stream-of-consciousness notes) to **build mode** (PRD + tasks generated by Taskmaster).

The app does not execute builds itself — it **produces high-quality markdown artifacts** and **visualizes task execution state**.

---

## Goals

1. Capture unstructured thoughts quickly without forcing structure
2. Group work into subprojects instead of monolithic PRDs
3. Generate a PRD + task list via Taskmaster on demand
4. Use markdown as the portable, copyable source of truth
5. Render task markdown into a usable UI
6. Track task state and discussion without modifying markdown
7. Allow projects to evolve by adding new subprojects over time

---

## Non-Goals

- Running builds inside the app
- Editing tasks directly in the app markdown
- Multi-user collaboration
- Replacing Cursor or Taskmaster

---

## Core Terminology

- **Project**: A container for related subprojects
- **Subproject**: A scoped unit of work that can be planned and built independently
- **Planned Mode**: Freeform ideation state for a subproject
- **Build Mode**: Generated PRD + task execution state
- **Task**: A single unit of work generated by Taskmaster
- **Markdown Contract**: The PRD + tasks markdown handed off to Cursor

---

## Data Model (Conceptual)

### Project
- id
- name
- status: planning | in_progress | complete
- created_at
- updated_at

### Subproject
- id
- project_id
- name
- mode: planned | build | complete
- created_at
- updated_at

### Note
- id
- subproject_id
- type: text | image
- content
- created_at

### Task (derived from markdown)
- id
- subproject_id
- title
- description
- status: todo | in_progress | done

### Task Comment (Supabase only)
- id
- task_id
- content
- created_at

---

## Views & Routing

All views must be addressable via URL.

---

### Project List View

**Route**
/

markdown
Copy code

**Purpose**
- Entry point
- Show all projects

**Displays**
- Project name
- Project status:
  - Planning (all subprojects planned)
  - In Progress (at least one subproject in build)
  - Complete (all subprojects complete)
- CTA: Create new project

---

### Project View

**Route**
/projects/[projectId]

markdown
Copy code

**Purpose**
- Show all subprojects in a project

**Displays**
- List of subprojects
- Subproject mode:
  - Planned
  - Build
  - Complete
- CTA: Add subproject

**Project status logic**
- Planning: all subprojects in planned mode
- In Progress: at least one subproject in build mode
- Complete: all subprojects complete

---

### Subproject View — Planned Mode

**Route**
/projects/[projectId]/subprojects/[subprojectId]

markdown
Copy code

**Mode**
- Planned

**Purpose**
- Stream-of-consciousness ideation

**Content**
- Timeline or list of notes
- Notes can be:
  - Single thoughts
  - Bullet lists
  - Images with associated text
  - Large pasted content blocks

Each input creates a **note entry**, not a structured document.

**Primary Action**
- **“Let’s build it”**

---

## “Let’s Build It” Action (Critical Flow)

When clicked, the system performs the following:

1. **Aggregate notes**
   - All notes in the subproject are collected
   - Images and text are included

2. **Generate PRD (Markdown)**
   - Uses Taskmaster to:
     - Interpret intent
     - Fill gaps via research
     - Produce a coherent PRD

3. **Generate Tasks (Markdown)**
   - Uses Taskmaster to:
     - Break PRD into tasks
     - Include:
       - Task descriptions
       - Subtasks
       - Acceptance criteria
       - Test expectations

4. **Persist Markdown**
   - PRD markdown saved
   - Task markdown saved
   - These files are **read-only in the app**

5. **Transition Subproject**
   - Mode changes from `planned` → `build`

---

## Subproject View — Build Mode

**Route**
/projects/[projectId]/subprojects/[subprojectId]

yaml
Copy code

**Mode**
- Build

**Purpose**
- Track execution of Taskmaster-generated tasks

---

### Task List UI

Rendered from the task markdown.

**Structure**
- Accordion list of tasks
- Each task shows:
  - Title
  - Description
  - Status
  - Subtasks
  - Acceptance criteria

---

### Task Interaction (UI State Only)

The following are **not written back to markdown**:

- Task status (done / not done)
- Comments / discussion

These are stored in Supabase and layered on top of the markdown.

**Per-task features**
- Mark task complete
- Add comments
- View comment history

---

## Completion Rules

### Subproject Completion
A subproject is marked **complete** when:
- All tasks are marked done

### Project Completion
A project is marked **complete** when:
- All subprojects are complete

---

## Iteration & Expansion

- A project can always receive new subprojects
- New subprojects always start in **planned mode**
- Existing completed subprojects are not affected

This allows:
- Incremental feature work
- Additive development
- Clean historical context

---

## Technical Stack

- **Frontend**: Next.js (App Router), React
- **Database**: Supabase
- **AI / Task Generation**: Taskmaster (via Cursor)
- **Hosting**: Webflow Cloud
- **Markdown Parsing**: Client-side rendering of PRD + tasks

---

## Explicit Design Constraints

- Markdown is treated as **immutable output**
- App does not “edit” PRDs or tasks
- App visualizes and annotates execution only
- Cursor is the source of truth for code

---

## Success Criteria

- Planning feels frictionless
- PRDs generated are immediately usable in Cursor
- Tasks render cleanly without manual cleanup
- Task execution state is visible and durable
- Adding new work never disrupts completed work

---
